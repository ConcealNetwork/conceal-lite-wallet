<div class="loading" *ngIf="isLoading">
  <app-loader [isLoading]="isLoading"></app-loader>
</div>

<div *ngIf="!isLoading" class="container" fxLayout="column" fxLayoutAlign="center stretch" fxLayoutGap="35px" @enterAnimation @stagger>

  <div fxLayout="row" fxLayoutGap="45px">

    <div fxFlex="30">
      <h1 class="title">{{ 'PAGES.DASHBOARD.PORTFOLIO' | translate }}</h1>
      <mat-card id="cards" class="cards" fxLayout="column">
        <mat-card-header>
          <mat-card-title>
            {{ 'PAGES.DASHBOARD.BALANCE' | translate }}
          </mat-card-title>
        </mat-card-header>
        <mat-card-content fxFlex="auto">
          <div class="balances" fxLayout="column" fxLayoutAlign="space-between stretch">
            <div fxLayout="row" fxFlex="25" fxLayout="row" fxLayoutAlign="space-between stretch">
              <span class="st">Available</span>
              <span class="sb">{{portfolio?.available || 0}} <span class="ccx">CCX</span></span>
            </div>
            <div fxLayout="row" fxFlex="25" fxLayout="row" fxLayoutAlign="space-between stretch">
              <span class="st">Pending</span>
              <span class="sb">{{portfolio?.pending || 0}} <span class="ccx">CCX</span></span>
            </div>
            <div fxLayout="row" fxFlex="25" fxLayout="row" fxLayoutAlign="space-between stretch">
              <span class="st">Withdrawable</span>
              <span class="sb">{{portfolio?.withdrawable || 0}} <span class="ccx">CCX</span></span>
            </div>
          </div>
        </mat-card-content>
        <mat-card-footer>
          <mat-card-actions fxLayoutAlign="center center">
            <button mat-button aria-hidden="false" aria-label="refresh">
              Refresh
            </button>
            <div fxFlex></div>
            <button mat-button aria-hidden="false" aria-label="trasnfer">
              Transfer
            </button>
          </mat-card-actions>
        </mat-card-footer>
      </mat-card>
    </div>

    <div fxFlex="70">
      <h1 class="title">{{ 'PAGES.DASHBOARD.WALLETS' | translate }}</h1>
      <div fxLayout="row" fxLayoutGap="15px">
        <mat-card id="cards" class="cards" fxFlex fxLayout="column" *ngFor="let item of wallets | keyvalue | reverse">
          <mat-card-header>
            <mat-card-title fxLayout="row" fxLayoutAlign="space-between stretch">
              <div>{{ (item.key.length>7)? (item.key | slice:0:7)+'...':(item.key) }}{{(item.key | slice:-7)}}</div>
              <div class="default" fxLayoutGap="15px">
                <mat-icon *ngIf="item.value.default" svgIcon="stars" matTooltip="Primary Address" aria-label="Primary" matTooltipPosition="above" matTooltipClass="custom-tooltip"></mat-icon>
                <mat-icon svgIcon="assignment" matTooltip="Copy Address" aria-label="Copy Address" matTooltipPosition="above" matTooltipClass="custom-tooltip"></mat-icon>
              </div>
            </mat-card-title>
          </mat-card-header>
          <mat-card-content fxFlex="auto">
            <div class="balances" fxLayout="column" fxLayoutAlign="space-between stretch">
              <div fxLayout="row" fxFlex="25" fxLayoutAlign="space-between stretch">
                <span class="st">Available</span>
                <span class="sb">{{ item.value.total }} <span class="ccx">CCX</span></span>
              </div>
              <div fxLayout="row" fxFlex="25" fxLayoutAlign="space-between stretch">
                <span class="st">Pending</span>
                <span class="sb">{{ item.value.locked }} <span class="ccx">CCX</span></span>
              </div>
              <div fxLayout="row" fxFlex="25" fxLayoutAlign="space-between stretch">
                <span class="st">Withdrawable</span>
                <span class="sb">{{ item.value.balance }} <span class="ccx">CCX</span></span>
              </div>
            </div>
          </mat-card-content>
          <mat-card-footer>
            <mat-card-actions fxLayoutAlign="start center">
              <button mat-button aria-hidden="false" aria-label="refresh" matTooltip="Export your private keys" aria-label="Export your private keys" matTooltipPosition="below" matTooltipClass="custom-tooltip">
                Export Keys
              </button>
              <button mat-button aria-hidden="false" aria-label="trasnfer" matTooltip="Show your QR Code" aria-label="Show your QR Code" matTooltipPosition="below" matTooltipClass="custom-tooltip">
                QR Code
              </button>
              <button mat-button aria-hidden="false" aria-label="trasnfer" *ngIf="!item.value.default" matTooltip="Delete your wallet" aria-label="Delete your wallet" matTooltipPosition="below" matTooltipClass="custom-tooltip">
                Remove
              </button>
            </mat-card-actions>
          </mat-card-footer>
        </mat-card>
      </div>
    </div>

  </div>

  <div fxLayout="column">
    <h1 class="title">{{ 'PAGES.DASHBOARD.MARKET' | translate }}</h1>
    <mat-card id="cards" class="cards">
      <mat-card-content>
        <div class="chart-wrapper">
          <canvas baseChart
            [datasets]="lineChartData" 
            [labels]="lineChartLabels" 
            [options]="lineChartOptions"
            [colors]="lineChartColors" 
            [chartType]="lineChartType" 
          >
          </canvas>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
  
</div>